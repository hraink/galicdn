(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{4:function(t,e,n){n(69);var s=n(26);var i=n(70);var o=n(27);var d=n(2);var r=n(0);var c=n(1);function l(t){if(t instanceof Array){return t}else{var e=[];if(typeof t==="string"){try{e=JSON.parse(t)}catch(n){e=[]}}return e}}t.exports=function(a){return new s({template:i,data:{hasRegisterProtocols:l(window.akanConfig.registerProtocols).length>0,registerProtocols:l(window.akanConfig.registerProtocols),showLoginEntry:r.getUrlParams("back_url")},events:{"click .mobile-edit":function(t){this.reRender()},'change input[name="protocol"]':function(){var t=$('input[name="protocol"]',this.mountNode),n=true;t.each(function(t,e){if(!e.checked){n=false}});if(n){$('.button[data-action="validateCaptcha"]').removeClass("disabled")}else{$('.button[data-action="validateCaptcha"]:not(.disabled)').addClass("disabled")}},'click .button[data-action="validateCaptcha"]:not(.disabled)':function(t){var e=this;o.exec(".step-one").done(function(t){$.extend(e.registerData,t);$('input[name="mobileConfirm"]').val(t.username);$(".step-one").hide();$(".step-two").show();e.childWedgets.smsInput.off("sendError").on("sendError",function(){$(".step-one").show();$(".step-two").hide();e.childWedgets.captchaInput.getCaptcha();e.childWedgets.smsInput.clear();o.clearError("smsCaptcha")});if(window.akanConfig.autoSendMsg==="y"){e.childWedgets.smsInput.getSmsCaptch()}})},'click .button[data-action="sendVerifyCode"]':function(t){var e=this;o.exec(".step-two").done(function(t){$.extend(e.registerData,t);$(".step-two").hide();$(".step-three").show()})},'click .button[data-action="register-submit"]:not(.disabled)':"submit"},submit:function(t){var e=this,n=$('.button[data-action="register-submit"]',e.mountNode);o.exec(".step-three").done(function(t){n.addClass("disabled").text(c.get("gd-AccountSystem.common.submitting"));$.post("/api/register",$.extend(e.registerData,t)).done(function(t){r.postMessage($.extend(t,{type:"REGISTER_ACCOUNT_SYSTEM"}),"*");if(t.success){d.success(c.get("gd-AccountSystem.page.register.registerSuccess"));a.push("/result",{type:"success",text:c.get("gd-AccountSystem.page.register.registerSuccess")});return}else if(t.code==="16785412"){setTimeout(function(){e.reRender()},1e3)}n.removeClass("disabled").text(c.get("gd-AccountSystem.common.ImmediatelySubmitted"))}).fail(function(){n.removeClass("disabled").text(c.get("gd-AccountSystem.common.ImmediatelySubmitted"))})})},didMount:function(){this.registerData={};o.listen(".register-form-container")}})}},69:function(t,e,n){"use strict";n.r(e)},70:function(t,e,n){var m=n(25);t.exports=function(t){"use strict";t=t||{};var n="",a=m.$escape,e=t.i18n,s=t.config,i=t.hasRegisterProtocols,o=m.$each,d=t.registerProtocols,r=t.$value,c=t.$index,l=t.showLoginEntry;n+='<div class="register-container content" data-css3="true">\n  <div class="register-title-container">\n    <h2>';n+=a(e("gd-AccountSystem.page.regsiter.register"));n+="</h2>\n    <p>";n+=a(e("gd-AccountSystem.page.regsiter.VerificationCodeWillSentToPhone"));n+='</p>\n  </div>\n  <form class="register-form-container">\n    <div class="step-one">\n      <div class="form-field">\n        ';if(s.loginType!=="emailLogin"){n+='\n        <div class="form-field-control">\n          <div class="mobile-field" ';if(s.phoneCodeSupport!=="y"){n+='data-disabled="disabled"'}n+=' data-component="phoneNumberInput" data-name="username" data-validator="phoneNumber"></div>\n        </div>\n        '}else{n+='\n        <div class="form-field-control" data-validator="noEmpty" data-name="username">\n          <input type="text" name="username" placeholder="';n+=a(e("gd-AccountSystem.common.username"));n+='">\n        </div>\n        '}n+='\n      </div>\n      <div class="form-field">\n        <div class="form-field-control">\n          <div class="captcha-field" data-component="captchaInput" data-name="captcha" data-validator="captcha"></div>\n        </div>\n      </div>\n      <div class="register-btn">\n        <span tabindex="0" class="button button-primary ';if(i){n+="disabled"}n+='" data-action="validateCaptcha">';n+=a(e("gd-AccountSystem.common.TheNextStep"));n+="</span>\n      </div>\n      ";if(i){n+='\n      <div class="register-protocol">\n        ';o(d,function(t,e){n+='\n        <div><label><input type="checkbox" name="protocol"><a href="';n+=a(t.url);n+='" target="_blank">《';n+=a(t.name);n+="》</a></label></div>\n        "});n+="\n      </div>\n      "}n+='\n    </div>\n    <div class="step-two" style="display: none">\n      <div class="form-field">\n        <div class="form-field-control">\n          <div class="view-input">\n            <input type="text" name="mobileConfirm" disabled />\n            <span class="mobile-edit">';n+=a(e("gd-AccountSystem.common.modify"));n+='</span>\n          </div>\n        </div>\n      </div>\n      <div class="form-field">\n        <div class="form-field-control">\n          <div class="sms-field" data-component="smsInput" data-name="smsCaptcha" data-validator="smsCaptcha" data-sendtemplate="REGISTER"></div>\n        </div>\n      </div>\n      <div class="register-btn">\n        <span tabindex="0" class="button button-primary" data-action="sendVerifyCode">';n+=a(e("gd-AccountSystem.common.TheNextStep"));n+='</span>\n      </div>\n    </div>\n    <div class="step-three" style="display: none">\n      <div class="form-field">\n        <div class="form-field-control">\n          <div class="password-field" data-component="passwordInput" data-name="password" data-validator="password" data-showtips="true"></div>\n        </div>\n      </div>\n      <div class="form-field">\n        <div class="form-field-control">\n          <div class="password-field" data-component="passwordInput" data-name="passwordConfirm" data-validator="comfirmPassword" data-showtips="true" data-placeholder="';n+=a(e("gd-AccountSystem.common.passwordConfirm"));n+='"></div>\n        </div>\n      </div>\n      <div class="register-btn">\n        <span tabindex="0" data-mainkey="true" class="button button-primary" data-action="register-submit">';n+=a(e("gd-AccountSystem.common.ImmediatelySubmitted"));n+='</span>\n      </div>\n    </div>\n  </form>\n  <div class="register-bottom-container">\n    ';if(l){n+='\n    <div class="to-login-tips">';n+=a(e("gd-AccountSystem.page.regsiter.hasAccount"));n+='<a href="#/login">';n+=a(e("gd-AccountSystem.common.ToLogin"));n+="</a></div>\n    "}n+="\n  </div>\n</div>\n";return n}}}]);
